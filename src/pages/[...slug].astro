---
import Layout from "@/layouts/Layout.astro";
import { getCollection, render } from "astro:content";
import type { CollectionEntry } from "astro:content";

export async function getStaticPaths() {
    const pages = await getCollection("pages");

    return pages.map((entry) => ({
        params: {
            slug: entry.id === "index" ? undefined : entry.id,
        },
        props: { entry },
    }));
}

type Props = {
    entry: CollectionEntry<"pages">;
};

const { entry } = Astro.props as Props;

const { Content } = await render(entry);
---

<Layout title={`${entry.data.title}`} description={`${entry.id}`}>
    <section class="prose dark:prose-invert max-w-2xl mx-auto overflow-visible">
        <Content />
    </section>
</Layout>
